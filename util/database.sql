-- MySQL Script generated by MySQL Workbench
-- Tue May  1 10:12:55 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema project
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `project` ;

-- -----------------------------------------------------
-- Schema project
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `project` DEFAULT CHARACTER SET utf8 ;
USE `project` ;

-- -----------------------------------------------------
-- Table `ENDERECO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ENDERECO` (
  `idENDERECO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `ruaENDERECO` VARCHAR(45) NOT NULL,
  `numENDERECO` INT NOT NULL,
  `bairroENDERECO` VARCHAR(45) NOT NULL,
  `cepENDERECO` VARCHAR(10) NULL,
  `cidadeENDERECO` VARCHAR(45) NULL,
  `ufENDERECO` VARCHAR(2) NULL,
  PRIMARY KEY (`idENDERECO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PESSOA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PESSOA` (
  `idPESSOA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `cpfcnpjPESSOA` VARCHAR(20) NOT NULL,
  `nomePESSOA` VARCHAR(255) NOT NULL,
  `snomePESSOA` VARCHAR(255) NOT NULL,
  `rgiePESSOA` VARCHAR(15) NULL,
  `telPESSOA` VARCHAR(15) NOT NULL,
  `emailPESSOA` VARCHAR(255) NOT NULL,
  `tipoPESSOA` VARCHAR(2) NOT NULL,
  `ativoPESSOA` INT NOT NULL,
  `ENDERECO_idENDERECO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idPESSOA`),
  UNIQUE INDEX `idPESSOA_UNIQUE` (`idPESSOA` ASC),
  CONSTRAINT `fk_PESSOA_ENDERECO1`
    FOREIGN KEY (`ENDERECO_idENDERECO`)
    REFERENCES `ENDERECO` (`idENDERECO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `USERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `USERS` (
  `idUSER` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `funcaoUSER` VARCHAR(15) NOT NULL,
  `panelUSER` VARCHAR(10) NOT NULL,
  `usuarioUSER` VARCHAR(20) NOT NULL,
  `senhaUSER` VARCHAR(50) NOT NULL,
  `PESSOA_idPESSOA` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idUSER`),
  CONSTRAINT `fk_USERS_PESSOA1`
    FOREIGN KEY (`PESSOA_idPESSOA`)
    REFERENCES `PESSOA` (`idPESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EMPRESA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EMPRESA` (
  `idEMPRESA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `logoEMPRESA` VARCHAR(10) NOT NULL,
  `PESSOA_idPESSOA` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idEMPRESA`),
  CONSTRAINT `fk_EMPRESA_PESSOA1`
    FOREIGN KEY (`PESSOA_idPESSOA`)
    REFERENCES `PESSOA` (`idPESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `LOG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `LOG` (
  `idLOG` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `acaoLOG` VARCHAR(25) NOT NULL,
  `dataLOG` DATE NOT NULL,
  `horaLOG` DATE NOT NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idLOG`, `USERS_idUSER`),
  CONSTRAINT `fk_LOG_USERS2`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CAIXA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `CAIXA` (
  `idCAIXA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `dataCAIXA` DATE NOT NULL,
  `horaCAIXA` VARCHAR(6) NOT NULL,
  `trocoCAIXA` DECIMAL(10,2) NOT NULL,
  `vlrfinalCAIXA` DECIMAL(10,2) NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idCAIXA`, `USERS_idUSER`),
  UNIQUE INDEX `idCAIXA_UNIQUE` (`idCAIXA` ASC),
  CONSTRAINT `fk_CAIXA_USERS1`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MOVIMENTACAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MOVIMENTACAO` (
  `idMOVIMENTACAO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `valorMOVIMENTACAO` DECIMAL(10,2) NOT NULL,
  `CAIXA_idCAIXA` INT UNSIGNED NOT NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  `idCLIENTE` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idMOVIMENTACAO`),
  UNIQUE INDEX `idMOVIMENTACAO_UNIQUE` (`idMOVIMENTACAO` ASC),
  CONSTRAINT `fk_MOVIMENTACAO_CAIXA1`
    FOREIGN KEY (`CAIXA_idCAIXA`)
    REFERENCES `CAIXA` (`idCAIXA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MOVIMENTACAO_USERS1`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MOVIMENTACAO_PESSOA1`
    FOREIGN KEY (`idCLIENTE`)
    REFERENCES `PESSOA` (`idPESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PRODUTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PRODUTO` (
  `idPRODUTO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `nomePRODUTO` VARCHAR(50) NOT NULL,
  `descricaoPRODUTO` VARCHAR(75) NOT NULL,
  `compraPRODUTO` DECIMAL(10,2) NOT NULL,
  `vendaPRODUTO` DECIMAL(10,2) NOT NULL,
  `estoquePRODUTO` INT NOT NULL,
  `minimoPRODUTO` INT NOT NULL,
  `ativoPRODUTO` INT NOT NULL,
  `idFORNECEDOR` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idPRODUTO`),
  UNIQUE INDEX `idPRODUTO_UNIQUE` (`idPRODUTO` ASC),
  CONSTRAINT `fk_PRODUTO_PESSOA1`
    FOREIGN KEY (`idFORNECEDOR`)
    REFERENCES `PESSOA` (`idPESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COMANDA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COMANDA` (
  `idCOMANDA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `qtditemCOMANDA` INT NOT NULL,
  `valorCOMANDA` DECIMAL(10,2) NOT NULL,
  `MOVIMENTACAO_idMOVIMENTACAO` INT UNSIGNED NOT NULL,
  `PRODUTO_idPRODUTO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idCOMANDA`),
  UNIQUE INDEX `idCOMANDA_UNIQUE` (`idCOMANDA` ASC),
  CONSTRAINT `fk_COMANDA_MOVIMENTACAO1`
    FOREIGN KEY (`MOVIMENTACAO_idMOVIMENTACAO`)
    REFERENCES `MOVIMENTACAO` (`idMOVIMENTACAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMANDA_PRODUTO1`
    FOREIGN KEY (`PRODUTO_idPRODUTO`)
    REFERENCES `PRODUTO` (`idPRODUTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SERVICO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SERVICO` (
  `idSERVICO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `nomeSERVICO` VARCHAR(45) NOT NULL,
  `descricaoSERVICO` VARCHAR(75) NOT NULL,
  `valorSERVICO` DECIMAL(10,2) NOT NULL,
  `ativoSERVICO` INT NOT NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idSERVICO`),
  UNIQUE INDEX `idSERVICO_UNIQUE` (`idSERVICO` ASC),
  CONSTRAINT `fk_SERVICO_USERS1`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ORDEMSERVICO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ORDEMSERVICO` (
  `idORDEMSERVICO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `protocoloORDEMSERVICO` VARCHAR(45) NOT NULL,
  `vendedorORDEMSERVICO` VARCHAR(255) NOT NULL,
  `telefoneORDEMSERVICO` VARCHAR(45) NOT NULL,
  `responsavelORDEMSERVICO` VARCHAR(255) NOT NULL,
  `objrecebidoORDEMSERVICO` VARCHAR(255) NOT NULL,
  `itemdeixadoORDEMSERVICO` VARCHAR(255) NOT NULL,
  `defeitosORDEMSERVICO` VARCHAR(255) NOT NULL,
  `statusORDEMSERVICO` VARCHAR(45) NOT NULL,
  `valorORDEMSERVICO` DECIMAL(10,2) NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  `idCLIENTE` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idORDEMSERVICO`),
  UNIQUE INDEX `idORDEMSERVICO_UNIQUE` (`idORDEMSERVICO` ASC),
  CONSTRAINT `fk_ORDEMSERVICO_USERS1`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ORDEMSERVICO_PESSOA1`
    FOREIGN KEY (`idCLIENTE`)
    REFERENCES `PESSOA` (`idPESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CREDITO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `CREDITO` (
  `idCREDITO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `valorCREDITO` DECIMAL(10,2) NOT NULL,
  `MOVIMENTACAO_idMOVIMENTACAO` INT UNSIGNED NOT NULL,
  `ORDEMSERVICO_idORDEMSERVICO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idCREDITO`),
  UNIQUE INDEX `idCREDITO_UNIQUE` (`idCREDITO` ASC),
  CONSTRAINT `fk_CREDITO_MOVIMENTACAO1`
    FOREIGN KEY (`MOVIMENTACAO_idMOVIMENTACAO`)
    REFERENCES `MOVIMENTACAO` (`idMOVIMENTACAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CREDITO_ORDEMSERVICO1`
    FOREIGN KEY (`ORDEMSERVICO_idORDEMSERVICO`)
    REFERENCES `ORDEMSERVICO` (`idORDEMSERVICO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DATA_STATUS_OS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DATA_STATUS_OS` (
  `idDATA_STATUS_OS` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `dataDSO` DATE NOT NULL,
  `horaDSO` VARCHAR(10) NOT NULL,
  `statusDSO` VARCHAR(45) NOT NULL,
  `ORDEMSERVICO_idORDEMSERVICO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idDATA_STATUS_OS`),
  UNIQUE INDEX `idDATA_STATUS_OS_UNIQUE` (`idDATA_STATUS_OS` ASC),
  CONSTRAINT `fk_DATA_STATUS_OS_ORDEMSERVICO1`
    FOREIGN KEY (`ORDEMSERVICO_idORDEMSERVICO`)
    REFERENCES `ORDEMSERVICO` (`idORDEMSERVICO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `OS_SERV`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OS_SERV` (
  `idOS_SERV` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `SERVICO_idSERVICO` INT UNSIGNED NOT NULL,
  `ORDEMSERVICO_idORDEMSERVICO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idOS_SERV`),
  UNIQUE INDEX `idOS_SERV_UNIQUE` (`idOS_SERV` ASC),
  CONSTRAINT `fk_OS_SERV_SERVICO1`
    FOREIGN KEY (`SERVICO_idSERVICO`)
    REFERENCES `SERVICO` (`idSERVICO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OS_SERV_ORDEMSERVICO1`
    FOREIGN KEY (`ORDEMSERVICO_idORDEMSERVICO`)
    REFERENCES `ORDEMSERVICO` (`idORDEMSERVICO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `OS_PROD`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OS_PROD` (
  `idOS_PROD` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `qtdOS_PROD` INT NOT NULL,
  `ORDEMSERVICO_idORDEMSERVICO` INT UNSIGNED NOT NULL,
  `PRODUTO_idPRODUTO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idOS_PROD`),
  UNIQUE INDEX `idOS_PROD_UNIQUE` (`idOS_PROD` ASC),
  CONSTRAINT `fk_OS_PROD_ORDEMSERVICO1`
    FOREIGN KEY (`ORDEMSERVICO_idORDEMSERVICO`)
    REFERENCES `ORDEMSERVICO` (`idORDEMSERVICO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OS_PROD_PRODUTO1`
    FOREIGN KEY (`PRODUTO_idPRODUTO`)
    REFERENCES `PRODUTO` (`idPRODUTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
