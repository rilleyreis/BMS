-- MySQL Script generated by MySQL Workbench
-- Fri Apr 13 17:01:14 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema project
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema project
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `project` DEFAULT CHARACTER SET utf8 ;
USE `project` ;

-- -----------------------------------------------------
-- Table `ENDERECO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ENDERECO` (
  `idENDERECO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `ruaENDERECO` VARCHAR(45) NOT NULL,
  `numENDERECO` INT NOT NULL,
  `bairroENDERECO` VARCHAR(45) NOT NULL,
  `cepENDERECO` VARCHAR(10) NULL,
  `cidadeENDERECO` VARCHAR(45) NULL,
  `ufENDERECO` VARCHAR(2) NULL,
  PRIMARY KEY (`idENDERECO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PFISICA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PFISICA` (
  `idPFISICA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `fnomePFISICA` VARCHAR(15) NOT NULL,
  `lnomePFISICA` VARCHAR(15) NOT NULL,
  `cpfPFISICA` VARCHAR(15) NOT NULL,
  `telPFISICA` VARCHAR(15) NULL,
  `celPFISICA` VARCHAR(15) NULL,
  `emailPFISICA` VARCHAR(45) NULL,
  PRIMARY KEY (`idPFISICA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PJURIDICA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PJURIDICA` (
  `idPJURIDICA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `cnpjPJURIDICA` VARCHAR(20) NOT NULL,
  `razsocPJURIDICA` VARCHAR(60) NOT NULL,
  `nomefantPJURIDICA` VARCHAR(30) NOT NULL,
  `iePJURIDICA` VARCHAR(15) NULL,
  `telPJURIDICA` VARCHAR(15) NULL,
  `emailPJURIDICA` VARCHAR(45) NULL,
  PRIMARY KEY (`idPJURIDICA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `USERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `USERS` (
  `idUSER` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `funcaoUSER` VARCHAR(15) NOT NULL,
  `panelUSER` VARCHAR(10) NOT NULL,
  `usuarioUSER` VARCHAR(20) NOT NULL,
  `senhaUSER` VARCHAR(20) NOT NULL,
  `ativoUSER` INT NOT NULL,
  `PFISICA_idPFISICA` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idUSER`, `PFISICA_idPFISICA`),
  CONSTRAINT `fk_USERS_PFISICA1`
    FOREIGN KEY (`PFISICA_idPFISICA`)
    REFERENCES `PFISICA` (`idPFISICA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ENDERECO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ENDERECO` (
  `idENDERECO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `ruaENDERECO` VARCHAR(45) NOT NULL,
  `numENDERECO` INT NOT NULL,
  `bairroENDERECO` VARCHAR(45) NOT NULL,
  `cepENDERECO` VARCHAR(10) NULL,
  `cidadeENDERECO` VARCHAR(45) NULL,
  `ufENDERECO` VARCHAR(2) NULL,
  PRIMARY KEY (`idENDERECO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `CLIENTE` (
  `idCLIENTE` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `ativoCLIENTE` INT NOT NULL,
  `ENDERECO_idENDERECO` INT UNSIGNED NOT NULL,
  `PFISICA_idPFISICA` INT UNSIGNED NULL,
  `PJURIDICA_idPJURIDICA` INT UNSIGNED NULL,
  PRIMARY KEY (`idCLIENTE`, `ENDERECO_idENDERECO`),
  CONSTRAINT `fk_CLIENTE_ENDERECO2`
    FOREIGN KEY (`ENDERECO_idENDERECO`)
    REFERENCES `ENDERECO` (`idENDERECO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CLIENTE_PFISICA1`
    FOREIGN KEY (`PFISICA_idPFISICA`)
    REFERENCES `PFISICA` (`idPFISICA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CLIENTE_PJURIDICA1`
    FOREIGN KEY (`PJURIDICA_idPJURIDICA`)
    REFERENCES `PJURIDICA` (`idPJURIDICA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `FORNECEDOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `FORNECEDOR` (
  `idFORNECEDOR` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `ativoFORNECEDOR` INT NOT NULL,
  `PJURIDICA_idPJURIDICA` INT UNSIGNED NOT NULL,
  `ENDERECO_idENDERECO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idFORNECEDOR`),
  CONSTRAINT `fk_FORNECEDOR_PJURIDICA1`
    FOREIGN KEY (`PJURIDICA_idPJURIDICA`)
    REFERENCES `PJURIDICA` (`idPJURIDICA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_FORNECEDOR_ENDERECO1`
    FOREIGN KEY (`ENDERECO_idENDERECO`)
    REFERENCES `ENDERECO` (`idENDERECO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EMPRESA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EMPRESA` (
  `idEMPRESA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `logoEMPRESA` VARCHAR(10) NOT NULL,
  `ativoEMPRESA` INT NOT NULL,
  `PJURIDICA_idPJURIDICA` INT UNSIGNED NOT NULL,
  `ENDERECO_idENDERECO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idEMPRESA`, `PJURIDICA_idPJURIDICA`, `ENDERECO_idENDERECO`),
  CONSTRAINT `fk_EMPRESA_PJURIDICA1`
    FOREIGN KEY (`PJURIDICA_idPJURIDICA`)
    REFERENCES `PJURIDICA` (`idPJURIDICA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EMPRESA_ENDERECO2`
    FOREIGN KEY (`ENDERECO_idENDERECO`)
    REFERENCES `ENDERECO` (`idENDERECO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `LOG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `LOG` (
  `idLOG` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `acaoLOG` VARCHAR(25) NOT NULL,
  `dataLOG` DATE NOT NULL,
  `horaLOG` DATE NOT NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idLOG`, `USERS_idUSER`),
  CONSTRAINT `fk_LOG_USERS2`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CAIXA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `CAIXA` (
  `idCAIXA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `dataCAIXA` DATE NOT NULL,
  `horaCAIXA` VARCHAR(6) NOT NULL,
  `trocoCAIXA` DECIMAL(10,2) NOT NULL,
  `vlrfinalCAIXA` DECIMAL(10,2) NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idCAIXA`, `USERS_idUSER`),
  UNIQUE INDEX `idCAIXA_UNIQUE` (`idCAIXA` ASC),
  CONSTRAINT `fk_CAIXA_USERS1`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MOVIMENTACAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `MOVIMENTACAO` (
  `idMOVIMENTACAO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `valorMOVIMENTACAO` DECIMAL(10,2) NOT NULL,
  `CAIXA_idCAIXA` INT UNSIGNED NOT NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  `CLIENTE_idCLIENTE` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idMOVIMENTACAO`),
  UNIQUE INDEX `idMOVIMENTACAO_UNIQUE` (`idMOVIMENTACAO` ASC),
  CONSTRAINT `fk_MOVIMENTACAO_CAIXA1`
    FOREIGN KEY (`CAIXA_idCAIXA`)
    REFERENCES `CAIXA` (`idCAIXA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MOVIMENTACAO_USERS1`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MOVIMENTACAO_CLIENTE1`
    FOREIGN KEY (`CLIENTE_idCLIENTE`)
    REFERENCES `CLIENTE` (`idCLIENTE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PRODUTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PRODUTO` (
  `idPRODUTO` INT NOT NULL AUTO_INCREMENT,
  `nomePRODUTO` VARCHAR(50) NOT NULL,
  `descricaoPRODUTO` VARCHAR(75) NOT NULL,
  `compraPRODUTO` DECIMAL(10,2) NOT NULL,
  `vendaPRODUTO` DECIMAL(10,2) NOT NULL,
  `estoquePRODUTO` INT NOT NULL,
  `minimoPRODUTO` INT NOT NULL,
  `ativoPRODUTO` INT NOT NULL,
  `FORNECEDOR_idFORNECEDOR` INT UNSIGNED NULL,
  PRIMARY KEY (`idPRODUTO`),
  CONSTRAINT `fk_PRODUTO_FORNECEDOR1`
    FOREIGN KEY (`FORNECEDOR_idFORNECEDOR`)
    REFERENCES `FORNECEDOR` (`idFORNECEDOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COMANDA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COMANDA` (
  `idCOMANDA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `qtditemCOMANDA` INT NOT NULL,
  `valorCOMANDA` DECIMAL(10,2) NOT NULL,
  `MOVIMENTACAO_idMOVIMENTACAO` INT UNSIGNED NOT NULL,
  `PRODUTO_idPRODUTO` INT NOT NULL,
  PRIMARY KEY (`idCOMANDA`),
  UNIQUE INDEX `idCOMANDA_UNIQUE` (`idCOMANDA` ASC),
  CONSTRAINT `fk_COMANDA_MOVIMENTACAO1`
    FOREIGN KEY (`MOVIMENTACAO_idMOVIMENTACAO`)
    REFERENCES `MOVIMENTACAO` (`idMOVIMENTACAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMANDA_PRODUTO1`
    FOREIGN KEY (`PRODUTO_idPRODUTO`)
    REFERENCES `PRODUTO` (`idPRODUTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SERVICO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SERVICO` (
  `idSERVICO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `nomeSERVICO` VARCHAR(45) NOT NULL,
  `descricaoSERVICO` VARCHAR(75) NOT NULL,
  `valorSERVICO` DECIMAL(10,2) NOT NULL,
  `ativoSERVICO` INT NOT NULL,
  `USERS_idUSER` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idSERVICO`),
  UNIQUE INDEX `idSERVICO_UNIQUE` (`idSERVICO` ASC),
  CONSTRAINT `fk_SERVICO_USERS1`
    FOREIGN KEY (`USERS_idUSER`)
    REFERENCES `USERS` (`idUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
